<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Easy Tuna</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #1c1c1c 0%, #2d2d2d 100%);
      color: #fff;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
    }

    header {
      text-align: center;
      margin-bottom: 25px;
      width: 100%;
    }

    h1 {
      font-size: 2.5rem;
      margin-bottom: 10px;
      color: #4cafef;
      text-shadow: 0 0 10px rgba(76, 175, 239, 0.5);
    }

    .subtitle {
      color: #aaa;
      font-size: 1.1rem;
      margin-bottom: 20px;
    }

    .container {
      width: 100%;
      max-width: 1000px;
    }

    .tabs {
      display: flex;
      margin-bottom: 20px;
      background: #2a2a2a;
      border-radius: 10px;
      overflow: hidden;
    }

    .tab {
      padding: 12px 20px;
      cursor: pointer;
      transition: background 0.3s;
      text-align: center;
      flex: 1;
    }

    .tab.active {
      background: #4cafef;
      font-weight: bold;
    }

    .tuning-selector {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 15px;
      margin-bottom: 30px;
    }

    .tuning-card {
      background: #2a2a2a;
      border-radius: 12px;
      padding: 20px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
      border: 2px solid transparent;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    .tuning-card:hover {
      background: #333;
      transform: translateY(-5px);
    }

    .tuning-card.selected {
      border: 2px solid #4cafef;
      box-shadow: 0 0 15px #4cafef;
    }

    .tuning-card span {
      display: block;
      margin-top: 8px;
      font-size: 14px;
      color: #aaa;
    }

    .custom-tuning {
      background: #2a2a2a;
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 30px;
      display: none;
    }

    .custom-tuning.active {
      display: block;
    }

    .string-selector {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin-bottom: 20px;
    }

    .string-config {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .string-label {
      font-weight: bold;
      width: 30px;
    }

    select {
      padding: 8px;
      border-radius: 5px;
      border: 1px solid #444;
      background-color: #333;
      color: #fff;
      flex: 1;
    }

    .custom-name {
      padding: 8px;
      border-radius: 5px;
      border: 1px solid #444;
      background-color: #333;
      color: #fff;
      width: 100%;
      margin-bottom: 15px;
    }

    .save-tuning {
      background: #4caf50;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
      font-weight: bold;
      transition: background 0.3s;
    }

    .save-tuning:hover {
      background: #3d8b40;
    }

    .main-content {
      display: grid;
      grid-template-columns: 1fr;
      gap: 25px;
    }

    @media (min-width: 900px) {
      .main-content {
        grid-template-columns: 1fr 1fr;
      }
    }

    .strings-container {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 15px;
    }

    @media (min-width: 600px) {
      .strings-container {
        grid-template-columns: repeat(6, 1fr);
      }
    }

    .string {
      background: #2a2a2a;
      border-radius: 12px;
      padding: 15px;
      text-align: center;
      transition: all 0.3s ease;
      cursor: pointer;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    .string:hover {
      background: #333;
    }

    .string.active {
      background: #3a3a3a;
      box-shadow: 0 0 15px #4cafef;
    }

    .string-name {
      font-size: 28px;
      font-weight: bold;
      margin-bottom: 5px;
    }

    .string-freq {
      font-size: 16px;
      color: #4cafef;
      margin-bottom: 10px;
    }

    .tuner-display {
      background: #2a2a2a;
      border-radius: 16px;
      padding: 25px;
      text-align: center;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    .tuner-title {
      font-size: 1.5rem;
      margin-bottom: 20px;
      color: #4cafef;
    }

    .needle-container {
      position: relative;
      height: 200px;
      margin: 30px 0;
      background: #333;
      border-radius: 10px;
      overflow: hidden;
    }

    .needle-scale {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: space-between;
      padding: 0 20px;
    }

    .scale-mark {
      width: 2px;
      height: 100%;
      background: rgba(255, 255, 255, 0.2);
      position: relative;
    }

    .scale-mark.middle {
      background: #4cafef;
      width: 3px;
    }

    .scale-mark::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 20px;
      height: 2px;
      background: rgba(255, 255, 255, 0.5);
    }

    .scale-mark.middle::after {
      background: #4cafef;
      width: 30px;
    }

    .needle {
      position: absolute;
      top: 10px;
      left: 50%;
      transform: translateX(-50%) rotate(0deg);
      width: 6px;
      height: 180px;
      background: #ff5252;
      border-radius: 3px 3px 0 0;
      transform-origin: bottom center;
      transition: transform 0.3s ease;
      z-index: 10;
    }

    .needle::after {
      content: '';
      position: absolute;
      bottom: -10px;
      left: 50%;
      transform: translateX(-50%);
      width: 20px;
      height: 20px;
      background: #ff5252;
      border-radius: 50%;
    }

    .frequency-display {
      margin-top: 20px;
    }

    .current-freq {
      font-size: 2.5rem;
      font-weight: bold;
      color: #4cafef;
      margin-bottom: 10px;
    }

    .target-freq {
      font-size: 1.5rem;
      color: #aaa;
      margin-bottom: 15px;
    }

    .difference {
      font-size: 1.2rem;
      margin-bottom: 20px;
    }

    .status {
      font-size: 1.5rem;
      font-weight: bold;
      padding: 10px 20px;
      border-radius: 30px;
      display: inline-block;
    }

    .status.perfect {
      background: #4caf50;
      color: white;
    }

    .status.too-low {
      background: #ff9800;
      color: white;
    }

    .status.too-high {
      background: #f44336;
      color: white;
    }

    .note-indicator {
      margin-top: 20px;
      padding: 15px;
      background: #333;
      border-radius: 10px;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-wrap: wrap;
      gap: 10px;
    }

    .note-label {
      font-size: 1.2rem;
      color: #aaa;
    }

    .note-value {
      font-size: 2rem;
      font-weight: bold;
      color: #4cafef;
      min-width: 60px;
      text-align: center;
    }

    .note-details {
      font-size: 1rem;
      color: #aaa;
      margin-left: 10px;
    }

    .instructions {
      background: #2a2a2a;
      border-radius: 12px;
      padding: 20px;
      margin-top: 30px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    .instructions h3 {
      color: #4cafef;
      margin-bottom: 15px;
    }

    .instructions p {
      margin-bottom: 10px;
      line-height: 1.5;
    }

    .history-container {
      margin-top: 20px;
      height: 60px;
      background: #333;
      border-radius: 10px;
      overflow: hidden;
      position: relative;
    }

    .history-graph {
      display: flex;
      align-items: flex-end;
      height: 100%;
      padding: 0 5px;
    }

    .history-bar {
      flex: 1;
      background: #4cafef;
      margin: 0 2px;
      border-radius: 2px 2px 0 0;
      transition: height 0.3s ease;
    }

    footer {
      margin-top: 40px;
      text-align: center;
      color: #666;
      font-size: 0.9rem;
    }

    .permission-btn {
      background: #4caf50;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 30px;
      font-size: 1.1rem;
      cursor: pointer;
      margin: 20px 0;
      transition: all 0.3s ease;
    }

    .permission-btn:hover {
      background: #3d8b40;
      transform: scale(1.05);
    }
  </style>
</head>
<body>
  <header>
    <h1>Afinador mt bom Easy Tuna </h1>
    <p class="subtitle">Só fiz isso porque não tenho dinheiro para comprar um afinador, é tenso...</p>
  </header>

  <div class="container">
    <div class="tabs">
      <div class="tab active" onclick="showTab('preset')">Afinações Predefinidas</div>
      <div class="tab" onclick="showTab('custom')">Afinações Personalizadas</div>
    </div>

    <div id="preset-tunings" class="tuning-selector">
      <div class="tuning-card" onclick="selectTuning(this, 'standard')">
        Standard (EADGBE)
        <span>Afinação padrão</span>
      </div>
      <div class="tuning-card" onclick="selectTuning(this, 'dropd')">
        Drop D (DADGBE)
        <span>Para músicas mais pesadas</span>
      </div>
      <div class="tuning-card" onclick="selectTuning(this, 'eb')">
        Eb Standard (EbAbDbGbBbEb)
        <span>Meio tom abaixo</span>
      </div>
      <div class="tuning-card" onclick="selectTuning(this, 'dstd')">
        D Standard (DGCFAD)
        <span>Um tom abaixo</span>
      </div>
      <div class="tuning-card" onclick="selectTuning(this, 'openg')">
        Open G (DGDGBD)
        <span>Para blues e slide guitar</span>
      </div>
    </div>

    <div id="custom-tuning" class="custom-tuning">
      <h3>Criar Afinação Personalizada</h3>
      <input type="text" class="custom-name" id="customTuningName" placeholder="Nome da afinação personalizada">
      
      <div class="string-selector">
        <div class="string-config">
          <span class="string-label">6ª</span>
          <select id="string6">
            <option value="E2">E2</option>
            <option value="F2">F2</option>
            <option value="F#2">F#2</option>
            <option value="G2">G2</option>
            <option value="G#2">G#2</option>
            <option value="A2">A2</option>
            <option value="A#2">A#2</option>
            <option value="B2">B2</option>
            <option value="C3">C3</option>
            <option value="C#3">C#3</option>
            <option value="D3">D3</option>
            <option value="D#3">D#3</option>
            <option value="E3">E3</option>
            <option value="F3">F3</option>
            <option value="F#3">F#3</option>
            <option value="G3">G3</option>
            <option value="G#3">G#3</option>
            <option value="A3">A3</option>
            <option value="A#3">A#3</option>
            <option value="B3">B3</option>
          </select>
        </div>
        
        <div class="string-config">
          <span class="string-label">5ª</span>
          <select id="string5">
            <option value="A2">A2</option>
            <option value="A#2">A#2</option>
            <option value="B2">B2</option>
            <option value="C3">C3</option>
            <option value="C#3">C#3</option>
            <option value="D3">D3</option>
            <option value="D#3">D#3</option>
            <option value="E3">E3</option>
            <option value="F3">F3</option>
            <option value="F#3">F#3</option>
            <option value="G3">G3</option>
            <option value="G#3">G#3</option>
            <option value="A3" selected>A3</option>
            <option value="A#3">A#3</option>
            <option value="B3">B3</option>
            <option value="C4">C4</option>
            <option value="C#4">C#4</option>
            <option value="D4">D4</option>
            <option value="D#4">D#4</option>
            <option value="E4">E4</option>
          </select>
        </div>
        
        <div class="string-config">
          <span class="string-label">4ª</span>
          <select id="string4">
            <option value="D3">D3</option>
            <option value="D#3">D#3</option>
            <option value="E3">E3</option>
            <option value="F3">F3</option>
            <option value="F#3">F#3</option>
            <option value="G3">G3</option>
            <option value="G#3">G#3</option>
            <option value="A3">A3</option>
            <option value="A#3">A#3</option>
            <option value="B3">B3</option>
            <option value="C4">C4</option>
            <option value="C#4">C#4</option>
            <option value="D4" selected>D4</option>
            <option value="D#4">D#4</option>
            <option value="E4">E4</option>
            <option value="F4">F4</option>
            <option value="F#4">F#4</option>
            <option value="G4">G4</option>
            <option value="G#4">G#4</option>
            <option value="A4">A4</option>
          </select>
        </div>
        
        <div class="string-config">
          <span class="string-label">3ª</span>
          <select id="string3">
            <option value="G3">G3</option>
            <option value="G#3">G#3</option>
            <option value="A3">A3</option>
            <option value="A#3">A#3</option>
            <option value="B3">B3</option>
            <option value="C4">C4</option>
            <option value="C#4">C#4</option>
            <option value="D4">D4</option>
            <option value="D#4">D#4</option>
            <option value="E4">E4</option>
            <option value="F4">F4</option>
            <option value="F#4">F#4</option>
            <option value="G4" selected>G4</option>
            <option value="G#4">G#4</option>
            <option value="A4">A4</option>
            <option value="A#4">A#4</option>
            <option value="B4">B4</option>
            <option value="C5">C5</option>
            <option value="C#5">C#5</option>
            <option value="D5">D5</option>
          </select>
        </div>
        
        <div class="string-config">
          <span class="string-label">2ª</span>
          <select id="string2">
            <option value="B3">B3</option>
            <option value="C4">C4</option>
            <option value="C#4">C#4</option>
            <option value="D4">D4</option>
            <option value="D#4">D#4</option>
            <option value="E4">E4</option>
            <option value="F4">F4</option>
            <option value="F#4">F#4</option>
            <option value="G4">G4</option>
            <option value="G#4">G#4</option>
            <option value="A4">A4</option>
            <option value="A#4">A#4</option>
            <option value="B4" selected>B4</option>
            <option value="C5">C5</option>
            <option value="C#5">C#5</option>
            <option value="D5">D5</option>
            <option value="D#5">D#5</option>
            <option value="E5">E5</option>
            <option value="F5">F5</option>
            <option value="F#5">F#5</option>
          </select>
        </div>
        
        <div class="string-config">
          <span class="string-label">1ª</span>
          <select id="string1">
            <option value="E4">E4</option>
            <option value="F4">F4</option>
            <option value="F#4">F#4</option>
            <option value="G4">G4</option>
            <option value="G#4">G#4</option>
            <option value="A4">A4</option>
            <option value="A#4">A#4</option>
            <option value="B4">B4</option>
            <option value="C5">C5</option>
            <option value="C#5">C#5</option>
            <option value="D5">D5</option>
            <option value="D#5">D#5</option>
            <option value="E5" selected>E5</option>
            <option value="F5">F5</option>
            <option value="F#5">F#5</option>
            <option value="G5">G5</option>
            <option value="G#5">G#5</option>
            <option value="A5">A5</option>
            <option value="A#5">A#5</option>
            <option value="B5">B5</option>
          </select>
        </div>
      </div>
      
      <button class="save-tuning" onclick="saveCustomTuning()">Salvar Afinação Personalizada</button>
    </div>

    <button id="permissionButton" class="permission-btn" onclick="requestMicrophonePermission()">
      Ativar Microfone
    </button>

    <div class="main-content">
      <div class="strings-container" id="stringsContainer">
        </div>

      <div class="tuner-display">
        <div class="tuner-title">Afinador</div>
        
        <div class="needle-container">
          <div class="needle-scale">
            <div class="scale-mark"></div>
            <div class="scale-mark"></div>
            <div class="scale-mark"></div>
            <div class="scale-mark middle"></div>
            <div class="scale-mark"></div>
            <div class="scale-mark"></div>
            <div class="scale-mark"></div>
          </div>
          <div class="needle" id="needle"></div>
        </div>

        <div class="frequency-display">
          <div class="current-freq" id="currentFreq">-- Hz</div>
          <div class="target-freq" id="targetFreq">Alvo: -- Hz</div>
          <div class="difference" id="difference">Diferença: -- Hz</div>
          <div class="status" id="status">Toque uma corda</div>
        </div>

        <div class="note-indicator">
          <span class="note-label">Nota:</span>
          <span class="note-value" id="currentNote">--</span>
          <span class="note-details" id="noteDetails"></span>
        </div>

        <div class="history-container">
          <div class="history-graph" id="historyGraph"></div>
        </div>
      </div>
    </div>

    <div class="instructions">
      <h3>Como usar o afinador:</h3>
      <p>1. Clique em "Ativar Microfone" para permitir o acesso ao microfone</p>
      <p>2. Selecione uma afinação predefinida ou crie uma personalizada</p>
      <p>3. Toque uma corda do seu violão - o afinador detectará automaticamente qual é</p>
      <p>4. Ajuste a tarraxa até a agulha ficar centralizada e a mensagem ficar verde</p>
      <p>5. A nota detectada será mostrada acima do gráfico de histórico</p>
    </div>
  </div>

  <footer>
    <p>Afinador de Violão Online &copy; 2025 - Agamatsu ferrou com deepwoken!</p>
  </footer>

  <script>
    function _0x3916(){const _0xad89e7=['historyGraph','36470chUStw','#4caf50','div','translateX(-50%)\x20rotate(','#f44336','Diferença:\x20--\x20Hz','70JkzqTs','frequencies','too-low','6PumrRh','classList','display','style','currentFreq','tuning-card','selected','.string','length','9192ijFqQg','fftSize','remove','✓\x20Afinado','noteDetails','color','forEach','preset-tunings','noteNames','string5','active','perfect','add','\x22\x20salva\x20com\x20sucesso!','abs','webkitAudioContext','min','Db3','Alvo:\x20','\x20cents\x20acima','difference','204mBSzdq','status','Erro\x20ao\x20acessar\x20microfone:','entries','status\x20','standard','innerText','AudioContext','#ff9800','Bb3','none','string1','preset','log2','Afinação\x20\x22','string2','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22string-freq\x22>','error','createAnalyser','.tuning-card','198929rFFRUf','onclick','Eb2','targetFreq','205036GofxNq','Por\x20favor,\x20dê\x20um\x20nome\x20à\x20sua\x20afinação\x20personalizada','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span>Afinação\x20personalizada</span>\x0a\x20\x20\x20\x20\x20\x20','Muito\x20alta\x20↓','8613UwmIdx','getElementById','trim','grid','value','--\x20Hz','history-bar','9802190PxpGqI','custom-tuning','opacity','createMediaStreamSource','customTuningName','replace','needle','innerHTML','\x20Hz','shift','toFixed','currentNote','string','fill','.tab:nth-child(','.tab','block','round','map','Ab2','max','mediaDevices','20742ZzNJKg','sampleRate','too-high','Por\x20favor,\x20ative\x20o\x20microfone\x20primeiro!','Afinando\x20corda\x20selecionada','14738603wIUjOF','Diferença:\x20','querySelector','getFloatTimeDomainData','message','getUserMedia','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22string-name\x22>','push','transform','createElement','✓\x20Perfeito!','className','appendChild','permissionButton','Toque\x20uma\x20corda','sqrt','translateX(-50%)\x20rotate(0deg)','querySelectorAll','Eb4'];_0x3916=function(){return _0xad89e7;};return _0x3916();}const _0x51985b=_0x2362;(function(_0x5b1ce6,_0x5dc3da){const _0x2b79dd=_0x2362,_0x4b8447=_0x5b1ce6();while(!![]){try{const _0xdf025d=-parseInt(_0x2b79dd(0x127))/0x1+-parseInt(_0x2b79dd(0x14d))/0x2*(parseInt(_0x2b79dd(0x113))/0x3)+parseInt(_0x2b79dd(0x12b))/0x4*(parseInt(_0x2b79dd(0xf2))/0x5)+parseInt(_0x2b79dd(0xf5))/0x6*(parseInt(_0x2b79dd(0xec))/0x7)+-parseInt(_0x2b79dd(0xfe))/0x8*(-parseInt(_0x2b79dd(0x130))/0x9)+parseInt(_0x2b79dd(0x137))/0xa+-parseInt(_0x2b79dd(0x152))/0xb;if(_0xdf025d===_0x5dc3da)break;else _0x4b8447['push'](_0x4b8447['shift']());}catch(_0x3f5a6a){_0x4b8447['push'](_0x4b8447['shift']());}}}(_0x3916,0x8861a));function _0x2362(_0x55dae3,_0x49b83c){const _0x3916d0=_0x3916();return _0x2362=function(_0x236278,_0xa45d8c){_0x236278=_0x236278-0xdd;let _0x3480c4=_0x3916d0[_0x236278];return _0x3480c4;},_0x2362(_0x55dae3,_0x49b83c);}let audioContext=null,analyser=null,dataArray=null,currentTuning=null,currentTuningName=null,currentTargetFreq=null,currentStringIndex=-0x1,manualSelection=![],historyData=[],microphone=null;const MAX_HISTORY=0x14,customTunings={};let lastValidFreq=null,lastValidNote=null,resetTimer=null;const noteFrequencies={'C0':16.35,'C#0':17.32,'Db0':17.32,'D0':18.35,'D#0':19.45,'Eb0':19.45,'E0':20.6,'F0':21.83,'F#0':23.12,'Gb0':23.12,'G0':24.5,'G#0':25.96,'Ab0':25.96,'A0':27.5,'A#0':29.14,'Bb0':29.14,'B0':30.87,'C1':32.7,'C#1':34.65,'Db1':34.65,'D1':36.71,'D#1':38.89,'Eb1':38.89,'E1':41.2,'F1':43.65,'F#1':46.25,'Gb1':46.25,'G1':0x31,'G#1':51.91,'Ab1':51.91,'A1':0x37,'A#1':58.27,'Bb1':58.27,'B1':61.74,'C2':65.41,'C#2':69.3,'Db2':69.3,'D2':73.42,'D#2':77.78,'Eb2':77.78,'E2':82.41,'F2':87.31,'F#2':92.5,'Gb2':92.5,'G2':0x62,'G#2':103.83,'Ab2':103.83,'A2':0x6e,'A#2':116.54,'Bb2':116.54,'B2':123.47,'C3':130.81,'C#3':138.59,'Db3':138.59,'D3':146.83,'D#3':155.56,'Eb3':155.56,'E3':164.81,'F3':174.61,'F#3':0xb9,'Gb3':0xb9,'G3':0xc4,'G#3':207.65,'Ab3':207.65,'A3':0xdc,'A#3':233.08,'Bb3':233.08,'B3':246.94,'C4':261.63,'C#4':277.18,'Db4':277.18,'D4':293.66,'D#4':311.13,'Eb4':311.13,'E4':329.63,'F4':349.23,'F#4':369.99,'Gb4':369.99,'G4':0x188,'G#4':415.3,'Ab4':415.3,'A4':0x1b8,'A#4':466.16,'Bb4':466.16,'B4':493.88,'C5':523.25,'C#5':554.37,'Db5':554.37,'D5':587.33,'D#5':622.25,'Eb5':622.25,'E5':659.25,'F5':698.46,'F#5':739.99,'Gb5':739.99,'G5':783.99,'G#5':830.61,'Ab5':830.61,'A5':0x370,'A#5':932.33,'Bb5':932.33,'B5':987.77,'C6':1046.5,'C#6':1108.73,'Db6':1108.73,'D6':1174.66,'D#6':1244.51,'Eb6':1244.51,'E6':1318.51,'F6':1396.91,'F#6':1479.98,'Gb6':1479.98,'G6':1567.98,'G#6':1661.22,'Ab6':1661.22,'A6':0x6e0,'A#6':1864.66,'Bb6':1864.66,'B6':1975.53},tunings={'standard':[noteFrequencies['E2'],noteFrequencies['A2'],noteFrequencies['D3'],noteFrequencies['G3'],noteFrequencies['B3'],noteFrequencies['E4']],'dropd':[noteFrequencies['D2'],noteFrequencies['A2'],noteFrequencies['D3'],noteFrequencies['G3'],noteFrequencies['B3'],noteFrequencies['E4']],'eb':[noteFrequencies[_0x51985b(0x129)],noteFrequencies[_0x51985b(0x14a)],noteFrequencies[_0x51985b(0x10f)],noteFrequencies['Gb3'],noteFrequencies[_0x51985b(0x11c)],noteFrequencies[_0x51985b(0xea)]],'dstd':[noteFrequencies['D2'],noteFrequencies['G2'],noteFrequencies['C3'],noteFrequencies['F3'],noteFrequencies['A3'],noteFrequencies['D4']],'openg':[noteFrequencies['D2'],noteFrequencies['G2'],noteFrequencies['D3'],noteFrequencies['G3'],noteFrequencies['B3'],noteFrequencies['D4']]},stringNames={'standard':['E','A','D','G','B','E'],'dropd':['D','A','D','G','B','E'],'eb':['Eb','Ab','Db','Gb','Bb','Eb'],'dstd':['D','G','C','F','A','D'],'openg':['D','G','D','G','B','D']};function showTab(_0x4d2396){const _0x53191f=_0x51985b;document[_0x53191f(0xe9)](_0x53191f(0x146))[_0x53191f(0x104)](_0x47bab3=>_0x47bab3['classList']['remove'](_0x53191f(0x108))),document[_0x53191f(0x154)](_0x53191f(0x145)+(_0x4d2396==='preset'?0x1:0x2)+')')['classList'][_0x53191f(0x10a)](_0x53191f(0x108)),_0x4d2396===_0x53191f(0x11f)?(document[_0x53191f(0x131)](_0x53191f(0x105))['style'][_0x53191f(0xf7)]=_0x53191f(0x133),document[_0x53191f(0x131)](_0x53191f(0x138))['style']['display']='none'):(document['getElementById'](_0x53191f(0x105))[_0x53191f(0xf8)]['display']=_0x53191f(0x11d),document['getElementById'](_0x53191f(0x138))[_0x53191f(0xf8)]['display']=_0x53191f(0x147));}function selectTuning(_0x337537,_0x3c58cd){const _0x1d522c=_0x51985b;if(!audioContext){alert('Por\x20favor,\x20ative\x20o\x20microfone\x20primeiro!');return;}document[_0x1d522c(0xe9)](_0x1d522c(0x126))[_0x1d522c(0x104)](_0x86d00d=>_0x86d00d[_0x1d522c(0xf6)][_0x1d522c(0x100)]('selected')),_0x337537[_0x1d522c(0xf6)]['add'](_0x1d522c(0xfb)),currentTuning=tunings[_0x3c58cd],currentTuningName=_0x3c58cd,displayStrings(_0x3c58cd),document[_0x1d522c(0x131)](_0x1d522c(0xf9))[_0x1d522c(0x119)]=_0x1d522c(0x135),document[_0x1d522c(0x131)](_0x1d522c(0x12a))[_0x1d522c(0x119)]='Alvo:\x20--\x20Hz',document[_0x1d522c(0x131)](_0x1d522c(0x112))['innerText']=_0x1d522c(0xf1),document[_0x1d522c(0x131)](_0x1d522c(0x114))['innerText']='Toque\x20uma\x20corda',document[_0x1d522c(0x131)]('status')['className']=_0x1d522c(0x114),document['getElementById'](_0x1d522c(0x142))['innerText']='--',document[_0x1d522c(0x131)](_0x1d522c(0x102))[_0x1d522c(0x119)]='',currentTargetFreq=null,currentStringIndex=-0x1,manualSelection=![],historyData=[],updateHistoryGraph(),resetNeedle(),document[_0x1d522c(0xe9)](_0x1d522c(0xfc))[_0x1d522c(0x104)](_0x38f17c=>_0x38f17c[_0x1d522c(0xf6)][_0x1d522c(0x100)](_0x1d522c(0x108)));}function saveCustomTuning(){const _0x3fa64d=_0x51985b,_0x499e58=document[_0x3fa64d(0x131)](_0x3fa64d(0x13b))[_0x3fa64d(0x134)][_0x3fa64d(0x132)]();if(!_0x499e58){alert(_0x3fa64d(0x12c));return;}const _0x6fb32=[document[_0x3fa64d(0x131)]('string6')['value'],document['getElementById'](_0x3fa64d(0x107))[_0x3fa64d(0x134)],document[_0x3fa64d(0x131)]('string4')[_0x3fa64d(0x134)],document[_0x3fa64d(0x131)]('string3')['value'],document['getElementById'](_0x3fa64d(0x122))[_0x3fa64d(0x134)],document[_0x3fa64d(0x131)](_0x3fa64d(0x11e))[_0x3fa64d(0x134)]],_0x7235c0=_0x6fb32[_0x3fa64d(0x149)](_0x36a117=>noteFrequencies[_0x36a117]),_0x150736=_0x6fb32[_0x3fa64d(0x149)](_0x42800e=>_0x42800e[_0x3fa64d(0x13c)](/\d/g,''));customTunings[_0x499e58]={'frequencies':_0x7235c0,'noteNames':_0x150736};const _0x3d659f=document[_0x3fa64d(0xe1)]('div');_0x3d659f[_0x3fa64d(0xe3)]=_0x3fa64d(0xfa),_0x3d659f[_0x3fa64d(0x13e)]=_0x3fa64d(0x12d)+_0x499e58+_0x3fa64d(0x12e),_0x3d659f[_0x3fa64d(0x128)]=()=>selectCustomTuning(_0x3d659f,_0x499e58),document[_0x3fa64d(0x131)](_0x3fa64d(0x105))[_0x3fa64d(0xe4)](_0x3d659f),alert(_0x3fa64d(0x121)+_0x499e58+_0x3fa64d(0x10b)),showTab(_0x3fa64d(0x11f));}function selectCustomTuning(_0x4ae51b,_0x530dec){const _0x24c644=_0x51985b;if(!audioContext){alert(_0x24c644(0x150));return;}document[_0x24c644(0xe9)]('.tuning-card')['forEach'](_0x3f572a=>_0x3f572a[_0x24c644(0xf6)][_0x24c644(0x100)](_0x24c644(0xfb))),_0x4ae51b['classList'][_0x24c644(0x10a)](_0x24c644(0xfb)),currentTuning=customTunings[_0x530dec][_0x24c644(0xf3)],currentTuningName=_0x530dec,displayCustomStrings(_0x530dec),document[_0x24c644(0x131)](_0x24c644(0xf9))[_0x24c644(0x119)]=_0x24c644(0x135),document[_0x24c644(0x131)](_0x24c644(0x12a))[_0x24c644(0x119)]='Alvo:\x20--\x20Hz',document[_0x24c644(0x131)](_0x24c644(0x112))[_0x24c644(0x119)]=_0x24c644(0xf1),document[_0x24c644(0x131)](_0x24c644(0x114))[_0x24c644(0x119)]='Toque\x20uma\x20corda',document['getElementById']('status')[_0x24c644(0xe3)]=_0x24c644(0x114),document[_0x24c644(0x131)](_0x24c644(0x142))['innerText']='--',document['getElementById'](_0x24c644(0x102))['innerText']='',currentTargetFreq=null,currentStringIndex=-0x1,manualSelection=![],historyData=[],updateHistoryGraph(),resetNeedle(),document[_0x24c644(0xe9)](_0x24c644(0xfc))['forEach'](_0x5ea280=>_0x5ea280[_0x24c644(0xf6)][_0x24c644(0x100)](_0x24c644(0x108)));}function displayCustomStrings(_0x3a90bf){const _0x312f6b=_0x51985b,_0x23020e=document[_0x312f6b(0x131)]('stringsContainer');_0x23020e[_0x312f6b(0x13e)]='';const _0x42545e=customTunings[_0x3a90bf];for(let _0x4b4c6a=0x0;_0x4b4c6a<0x6;_0x4b4c6a++){const _0x8b4040=document[_0x312f6b(0xe1)](_0x312f6b(0xee));_0x8b4040[_0x312f6b(0xe3)]='string',_0x8b4040[_0x312f6b(0x13e)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22string-name\x22>'+_0x42545e[_0x312f6b(0x106)][_0x4b4c6a]+_0x312f6b(0x123)+_0x42545e[_0x312f6b(0xf3)][_0x4b4c6a][_0x312f6b(0x141)](0x2)+'\x20Hz</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x8b4040[_0x312f6b(0x128)]=()=>selectStringManually(_0x4b4c6a),_0x23020e[_0x312f6b(0xe4)](_0x8b4040);}}function displayStrings(_0x554812){const _0x4934c5=_0x51985b,_0x54a1d2=document[_0x4934c5(0x131)]('stringsContainer');_0x54a1d2[_0x4934c5(0x13e)]='';for(let _0x19683e=0x0;_0x19683e<0x6;_0x19683e++){const _0x5abec4=document[_0x4934c5(0xe1)](_0x4934c5(0xee));_0x5abec4[_0x4934c5(0xe3)]=_0x4934c5(0x143),_0x5abec4[_0x4934c5(0x13e)]=_0x4934c5(0xde)+stringNames[_0x554812][_0x19683e]+_0x4934c5(0x123)+tunings[_0x554812][_0x19683e][_0x4934c5(0x141)](0x2)+'\x20Hz</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x5abec4[_0x4934c5(0x128)]=()=>selectStringManually(_0x19683e),_0x54a1d2[_0x4934c5(0xe4)](_0x5abec4);}}function selectStringManually(_0x46dfb2){const _0x2e813f=_0x51985b;if(!currentTuning)return;manualSelection=!![],currentStringIndex=_0x46dfb2,currentTargetFreq=currentTuning[_0x46dfb2],document['querySelectorAll'](_0x2e813f(0xfc))['forEach']((_0x18ca35,_0x56dbb1)=>{const _0x569d0f=_0x2e813f;_0x56dbb1===_0x46dfb2?_0x18ca35[_0x569d0f(0xf6)][_0x569d0f(0x10a)](_0x569d0f(0x108)):_0x18ca35[_0x569d0f(0xf6)]['remove'](_0x569d0f(0x108));}),document[_0x2e813f(0x131)](_0x2e813f(0x12a))['innerText']=_0x2e813f(0x110)+currentTargetFreq[_0x2e813f(0x141)](0x2)+_0x2e813f(0x13f),document[_0x2e813f(0x131)]('status')[_0x2e813f(0x119)]=_0x2e813f(0x151),document[_0x2e813f(0x131)]('status')[_0x2e813f(0xe3)]='status';}async function requestMicrophonePermission(){const _0x51e0db=_0x51985b;try{const _0x371966=await navigator[_0x51e0db(0x14c)][_0x51e0db(0xdd)]({'audio':!![]});audioContext=new(window[(_0x51e0db(0x11a))]||window[(_0x51e0db(0x10d))])(),analyser=audioContext[_0x51e0db(0x125)](),analyser[_0x51e0db(0xff)]=0x800,dataArray=new Float32Array(analyser[_0x51e0db(0xff)]),microphone=audioContext[_0x51e0db(0x13a)](_0x371966),microphone['connect'](analyser),detectPitch(),document[_0x51e0db(0x131)](_0x51e0db(0xe5))[_0x51e0db(0xf8)]['display']=_0x51e0db(0x11d),selectTuning(document['querySelector'](_0x51e0db(0x126)),_0x51e0db(0x118));}catch(_0x44ce5e){alert('Erro\x20ao\x20acessar\x20o\x20microfone:\x20'+_0x44ce5e[_0x51e0db(0x156)]),console[_0x51e0db(0x124)](_0x51e0db(0x115),_0x44ce5e);}}function detectPitch(){const _0x19aa45=_0x51985b;if(!analyser)return;requestAnimationFrame(detectPitch),analyser[_0x19aa45(0x155)](dataArray);let _0x5cfaa8=0x0;for(let _0x444efb=0x0;_0x444efb<dataArray[_0x19aa45(0xfd)];_0x444efb++){_0x5cfaa8+=dataArray[_0x444efb]*dataArray[_0x444efb];}_0x5cfaa8=Math[_0x19aa45(0xe7)](_0x5cfaa8/dataArray[_0x19aa45(0xfd)]);const _0x3832ba=0.015;if(_0x5cfaa8<_0x3832ba){lastValidFreq!==null&&resetTimer===null&&(resetTimer=setTimeout(()=>{const _0x10af76=_0x19aa45;lastValidFreq=null,lastValidNote=null,resetTimer=null,document[_0x10af76(0x131)](_0x10af76(0xf9))[_0x10af76(0x119)]=_0x10af76(0x135),document[_0x10af76(0x131)](_0x10af76(0x12a))[_0x10af76(0x119)]='Alvo:\x20--\x20Hz',document[_0x10af76(0x131)](_0x10af76(0x112))[_0x10af76(0x119)]='Diferença:\x20--\x20Hz',document[_0x10af76(0x131)](_0x10af76(0x114))['innerText']=_0x10af76(0xe6),document[_0x10af76(0x131)](_0x10af76(0x114))[_0x10af76(0xe3)]=_0x10af76(0x114),document[_0x10af76(0x131)](_0x10af76(0x142))[_0x10af76(0x119)]='--',document[_0x10af76(0x131)](_0x10af76(0x102))['innerText']='',resetNeedle();},0x1f4));return;}else resetTimer!==null&&(clearTimeout(resetTimer),resetTimer=null);let _0x1c1a2b=autoCorrelate(dataArray,audioContext[_0x19aa45(0x14e)]);if(_0x1c1a2b!==-0x1&&_0x1c1a2b>0x32&&_0x1c1a2b<0x1f4){let _0x2cda91=null,_0x433653=Infinity;for(const [_0x39188e,_0x30677d]of Object[_0x19aa45(0x116)](noteFrequencies)){const _0x22d986=Math[_0x19aa45(0x10c)](_0x1c1a2b-_0x30677d);_0x22d986<_0x433653&&(_0x433653=_0x22d986,_0x2cda91=_0x39188e);}lastValidFreq=_0x1c1a2b,lastValidNote=_0x2cda91,updateTunerDisplay(_0x1c1a2b,_0x2cda91);}else lastValidFreq!==null&&updateTunerDisplay(lastValidFreq,lastValidNote);}function updateTunerDisplay(_0x1ae064,_0x34b0ba){const _0x54e30c=_0x51985b,_0x42663b=noteFrequencies[_0x34b0ba],_0x5625c3=Math[_0x54e30c(0x148)](0x4b0*Math[_0x54e30c(0x120)](_0x1ae064/_0x42663b));if(!manualSelection&&currentTuning){let _0x594946=Infinity,_0x52ac89=-0x1;for(let _0x471bc5=0x0;_0x471bc5<currentTuning['length'];_0x471bc5++){const _0x5a35dc=Math[_0x54e30c(0x10c)](currentTuning[_0x471bc5]-_0x1ae064);_0x5a35dc<_0x594946&&(_0x594946=_0x5a35dc,_0x52ac89=_0x471bc5);}_0x594946<0xa&&(currentTargetFreq=currentTuning[_0x52ac89],currentStringIndex=_0x52ac89,document[_0x54e30c(0xe9)]('.string')[_0x54e30c(0x104)]((_0x38350b,_0x301f88)=>{const _0x223093=_0x54e30c;_0x301f88===_0x52ac89?_0x38350b[_0x223093(0xf6)][_0x223093(0x10a)](_0x223093(0x108)):_0x38350b[_0x223093(0xf6)][_0x223093(0x100)](_0x223093(0x108));}));}if(currentTargetFreq!==null){const _0x2ed9ac=_0x1ae064-currentTargetFreq,_0x68a290=Math['abs'](_0x2ed9ac),_0xc7e2f9=_0x2ed9ac[_0x54e30c(0x141)](0x2);updateNeedle(_0x2ed9ac),historyData[_0x54e30c(0xdf)](_0x2ed9ac);historyData[_0x54e30c(0xfd)]>MAX_HISTORY&&historyData[_0x54e30c(0x140)]();updateHistoryGraph();let _0x46930e='',_0x40f893='';if(_0x68a290<0.5)_0x46930e=_0x54e30c(0xe2),_0x40f893=_0x54e30c(0x109);else _0x2ed9ac<0x0?(_0x46930e='Muito\x20baixa\x20↑',_0x40f893=_0x54e30c(0xf4)):(_0x46930e=_0x54e30c(0x12f),_0x40f893=_0x54e30c(0x14f));document[_0x54e30c(0x131)](_0x54e30c(0xf9))['innerText']=_0x1ae064[_0x54e30c(0x141)](0x2)+_0x54e30c(0x13f),document[_0x54e30c(0x131)](_0x54e30c(0x12a))[_0x54e30c(0x119)]='Alvo:\x20'+currentTargetFreq[_0x54e30c(0x141)](0x2)+_0x54e30c(0x13f),document['getElementById'](_0x54e30c(0x112))['innerText']=_0x54e30c(0x153)+_0xc7e2f9+_0x54e30c(0x13f),document[_0x54e30c(0x131)]('status')[_0x54e30c(0x119)]=_0x46930e,document[_0x54e30c(0x131)]('status')[_0x54e30c(0xe3)]=_0x54e30c(0x117)+_0x40f893,document[_0x54e30c(0x131)]('currentNote')[_0x54e30c(0x119)]=_0x34b0ba;if(Math[_0x54e30c(0x10c)](_0x5625c3)<0x5)document[_0x54e30c(0x131)](_0x54e30c(0x102))[_0x54e30c(0x119)]=_0x54e30c(0x101),document['getElementById'](_0x54e30c(0x102))[_0x54e30c(0xf8)]['color']=_0x54e30c(0xed);else _0x5625c3<0x0?(document[_0x54e30c(0x131)](_0x54e30c(0x102))['innerText']=Math[_0x54e30c(0x10c)](_0x5625c3)+'\x20cents\x20abaixo',document['getElementById']('noteDetails')[_0x54e30c(0xf8)][_0x54e30c(0x103)]=_0x54e30c(0x11b)):(document['getElementById'](_0x54e30c(0x102))[_0x54e30c(0x119)]=_0x5625c3+_0x54e30c(0x111),document[_0x54e30c(0x131)](_0x54e30c(0x102))[_0x54e30c(0xf8)][_0x54e30c(0x103)]=_0x54e30c(0xf0));}}function updateNeedle(_0x248613){const _0x537ebb=_0x51985b,_0x5c4e92=document[_0x537ebb(0x131)](_0x537ebb(0x13d)),_0x136552=Math[_0x537ebb(0x14b)](-0xa,Math[_0x537ebb(0x10e)](0xa,_0x248613)),_0x145eba=_0x136552*0x3;_0x5c4e92[_0x537ebb(0xf8)][_0x537ebb(0xe0)]=_0x537ebb(0xef)+_0x145eba+'deg)';}function resetNeedle(){const _0x2c28cf=_0x51985b,_0x48a88a=document[_0x2c28cf(0x131)]('needle');_0x48a88a['style'][_0x2c28cf(0xe0)]=_0x2c28cf(0xe8);}function updateHistoryGraph(){const _0x491e98=_0x51985b,_0x191c28=document[_0x491e98(0x131)](_0x491e98(0xeb));_0x191c28[_0x491e98(0x13e)]='';for(let _0x2959cb=0x0;_0x2959cb<historyData[_0x491e98(0xfd)];_0x2959cb++){const _0x19554c=historyData[_0x2959cb],_0x49374a=Math['min'](0x64,Math[_0x491e98(0x10c)](_0x19554c)*0xa),_0x310a7d=document[_0x491e98(0xe1)](_0x491e98(0xee));_0x310a7d[_0x491e98(0xe3)]=_0x491e98(0x136),_0x310a7d[_0x491e98(0xf8)]['height']=_0x49374a+'%',_0x310a7d['style'][_0x491e98(0x139)]=0x1-_0x2959cb/historyData[_0x491e98(0xfd)]*0.5,_0x191c28[_0x491e98(0xe4)](_0x310a7d);}}function autoCorrelate(_0x28b0b5,_0xe135c){const _0x4a44f0=_0x51985b;let _0xbe0fd0=_0x28b0b5[_0x4a44f0(0xfd)],_0x57a8d7=0x0;for(let _0x1dd84c=0x0;_0x1dd84c<_0xbe0fd0;_0x1dd84c++){let _0x326962=_0x28b0b5[_0x1dd84c];_0x57a8d7+=_0x326962*_0x326962;}_0x57a8d7=Math['sqrt'](_0x57a8d7/_0xbe0fd0);if(_0x57a8d7<0.01)return-0x1;let _0x2331a5=0x0,_0x1b21a2=_0xbe0fd0-0x1,_0x19694c=0.2;for(let _0x2a3ce9=0x0;_0x2a3ce9<_0xbe0fd0/0x2;_0x2a3ce9++){if(Math['abs'](_0x28b0b5[_0x2a3ce9])<_0x19694c){_0x2331a5=_0x2a3ce9;break;}}for(let _0x454dab=0x1;_0x454dab<_0xbe0fd0/0x2;_0x454dab++){if(Math['abs'](_0x28b0b5[_0xbe0fd0-_0x454dab])<_0x19694c){_0x1b21a2=_0xbe0fd0-_0x454dab;break;}}_0x28b0b5=_0x28b0b5['slice'](_0x2331a5,_0x1b21a2),_0xbe0fd0=_0x28b0b5[_0x4a44f0(0xfd)];let _0x2e061d=new Array(_0xbe0fd0)[_0x4a44f0(0x144)](0x0);for(let _0x1da9c7=0x0;_0x1da9c7<_0xbe0fd0;_0x1da9c7++)for(let _0x901537=0x0;_0x901537<_0xbe0fd0-_0x1da9c7;_0x901537++)_0x2e061d[_0x1da9c7]=_0x2e061d[_0x1da9c7]+_0x28b0b5[_0x901537]*_0x28b0b5[_0x901537+_0x1da9c7];let _0x491e67=0x0;while(_0x2e061d[_0x491e67]>_0x2e061d[_0x491e67+0x1])_0x491e67++;let _0x17a8e3=-0x1,_0x5e61f7=-0x1;for(let _0x59d18a=_0x491e67;_0x59d18a<_0xbe0fd0;_0x59d18a++){_0x2e061d[_0x59d18a]>_0x17a8e3&&(_0x17a8e3=_0x2e061d[_0x59d18a],_0x5e61f7=_0x59d18a);}let _0x1da087=_0x5e61f7;return _0xe135c/_0x1da087;}
  </script>
</body>
</html>
